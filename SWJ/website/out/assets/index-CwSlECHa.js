(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function u(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(e){if(e.ep)return;e.ep=!0;const t=u(e);fetch(e.href,t)}})();document.addEventListener("DOMContentLoaded",()=>{const r={throat:{title:"The Throat",page:"Speaking Your Truth",pageNum:74},heart:{title:"The Heart",page:"Grief & Letting Go",pageNum:58},gut:{title:"The Gut",page:"Self-Sabotage Integration",pageNum:42}};async function l(){try{const o=(await(await fetch("shadow_workbook_pages_final.csv")).text()).trim().split(`
`);for(let p=1;p<o.length;p++){const h=u(o[p]),c=h[0].toLowerCase(),i=h[1];c.includes("self-sabotage")||c.includes("phase 5")?r.gut={title:"The Gut",page:i,pageNum:"Phase 5"}:c.includes("dark emotions")||c.includes("phase 6")?r.heart={title:"The Heart",page:i,pageNum:"Phase 6"}:(c.includes("golden shadow")||c.includes("phase 7"))&&(r.throat={title:"The Throat",page:i,pageNum:"Phase 7"})}const a=document.getElementById("popup-throat"),n=document.getElementById("popup-heart"),s=document.getElementById("popup-gut");a&&(a.textContent=`${r.throat.title}: ${r.throat.page}`),n&&(n.textContent=`${r.heart.title}: ${r.heart.page}`),s&&(s.textContent=`${r.gut.title}: ${r.gut.page}`)}catch{console.log("Using default body map data")}}l();function u(e){const t=[];let o="",a=!1;for(let n=0;n<e.length;n++){const s=e[n];s==='"'?a=!a:s===","&&!a?(t.push(o.trim()),o=""):o+=s}return t.push(o.trim()),t}async function d(){const e=document.getElementById("chapter-carousel");if(e)try{const a=(await(await fetch("shadow_workbook_pages_final.csv")).text()).trim().split(`
`);for(let n=1;n<a.length;n++){const s=u(a[n]),p=s[0],h=s[1],c=s[2],i=document.createElement("div");i.classList.add("chapter-card"),i.innerHTML=`
          <span class="chapter-phase">${p}</span>
          <h4>${h}</h4>
          <p>${c}</p>
        `,e.appendChild(i)}}catch(t){console.error("Error loading chapters:",t),e.innerHTML="<p>Could not load chapter preview.</p>"}}d(),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=document.querySelector(this.getAttribute("href"));o&&o.scrollIntoView({behavior:"smooth"})})})});
